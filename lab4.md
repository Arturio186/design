# Лабораторная работа №4
# Игра в дурака

## Диаграммы взаимодействия

### Прецедент "Создать игру"
![Создать игру](<./images/Interaction Diagrams/Создать игру>)

| Метод          | EnterName(userName)                                              |
|----------------|------------------------------------------------------------------|
| Ссылки         | Прецедент "Создать игру"                                         |
| Описание       | Игрок вводит своё имя и передает его системе                     |
| Параметры | userName - имя пользователя |
| Предусловие    | Игрок подключен к системе                                        |
| Постусловие    | Система получила имя                                             |

---

| Метод          | SavePlayer(userName)                                      |
|----------------|------------------------------------------------------------------|
| Ссылки         | Прецедент "Создать игру"                                         |
| Описание       | Система сохраняет имя игрока                                     |
| Параметры | userName - имя пользователя |
| Предусловие    | Игрок подключен к системе                                 |
| Постусловие    | Система сохранила имя игрока                                    |

---

| Метод       | CreateNewGame(userName)                                          |
|----------------|------------------------------------------------------------------|
| Ссылки         | Прецедент "Создать игру"                                         |
| Описание       | Пользователь отправляет запрос системе на создание игры, передавая свое имя                      |
| Параметры | userName - имя пользователя |
| Предусловие    | Игрок подключен к системе и ввёл своё имя                        |
| Постусловие    | Игра создана, ожидается подключение второго игрока               |

---

| Метод       | ValidateUsername(userName)                                 |
|----------------|------------------------------------------------------------------|
| Ссылки         | Прецедент "Создать игру"                                         |
| Описание       | Система проверяет ввёденное игроком имя                                   |
| Параметры | userName - имя пользователя |
| Предусловие    | Пользователь передал свое имя системе                            |
| Постусловие    | Система проверила наличие имени у игрока                         |

### Прецедент "Покинуть игру"
![Покинуть игру](<./images/Interaction Diagrams/Покинуть игру.png>)

| Метод       | LeaveGame()                                 |
|----------------|------------------------------------------------------------------|
| Ссылки         | Прецедент "Покинуть игру"                                        |
| Описание       | Игрок покидает текущую игру                                  |
| Предусловие    | Игрок находится в игре                                           |
| Постусловие    | Игрок покинул игру                                               |

---

| Метод       | FinishGame()                                                  |
|----------------|------------------------------------------------------------------|
| Ссылки         | Прецедент "Покинуть игру"                                        |
| Описание       | Система завершает текущую игру                                  |
| Предусловие    | Игрок нажал кнопку "Покинуть игру"                               |
| Постусловие    | Игра завершена                                                   |

| Метод       | RemoveAllPlayers()                                                  |
|----------------|------------------------------------------------------------------|
| Ссылки         | Прецедент "Покинуть игру"                                        |
| Описание       | Система удаляет всех игроков из текущей игры.                               |
| Предусловие    | Один из игроков нажал кнопку "Покинуть игру"                               |
| Постусловие    | Игра завершена                                                   |

### Прецедент "Присоединиться к игре"
![Присоединиться к игре](<./images/Interaction Diagrams/Присоединиться к игре.png>)

| Метод       | JoinGame(userName)                         |
|----------------|------------------------------------------------------------------|
| Ссылки         | Прецедент "Присоединиться к игре"                                |
| Описание       | Игрок отправляет запрос системе на подключение к игре                |
| Параметры | userName - имя пользователя |
| Предусловие    | Игрок подключен к системе                                        |
| Постусловие    | Игрок присоединен к игре                                         |

---

| Метод       | ValidateUsername(userName)                                 |
|----------------|------------------------------------------------------------------|
| Ссылки         | Прецедент "Присоединиться к игре"                                          |
| Описание       | Система проверяет ввёденное игроком имя                                   |
| Параметры | userName - имя пользователя |
| Предусловие    | Пользователь передал свое имя системе                            |
| Постусловие    | Система проверила наличие имени у игрока                         |

---

| Метод       | СheckSlots()                                 |
|----------------|------------------------------------------------------------------|
| Ссылки         | Прецедент "Присоединиться к игре"                                          |
| Описание       | Система проверяет наличие свободных мест в игре                                  |
| Предусловие    | Пользователь отправил запрос на присоединение к игре                            |
| Постусловие    | Система проверила наличие свободных мест                         |

---

| Метод       | AddPlayer(player)                        |
|----------------|------------------------------------------------------------------|
| Ссылки         | Прецедент "Присоединиться к игре"                                |
| Описание       | Система добавляет игрока в игру                                  |
|Параметры| player - игрока, отправивший запрос на присоединение к игре|
| Предусловие    | Пользователь отправил запрос на присоединение к игре            |
| Постусловие    | Игрок подключен к игре                                   |

---

| Метод       | StartGame()                        |
|----------------|------------------------------------------------------------------|
| Ссылки         | Прецедент "Присоединиться к игре"                                |
| Описание       | Система запускает игру                                |
| Предусловие    | В текущей игре находятся 2 игрока           |
| Постусловие    | Игра запущена                                  |

### Прецедент "Выставить карту"
![Выставить карту](<./images/Interaction Diagrams/Выставить карту.png>)

| Метод       | ThrowFirstCard(card)                                                            |
|----------------|------------------------------------------------------------------------------|
| Ссылки         | Прецедент "Выставить карту"                                                  |
| Описание       | Игрок выставляет первую карту хода                                |
|Параметры| card - карта игрока, которую он выставляет|
| Предусловие    | Игрок находится в игре, ход предоставлен игроку, не выброшено ни одной карты |
| Постусловие    | Игрок сделал первый ход, ожидает ответного хода от другого игрока            |


### Прецедент "Подкинуть карту"
![Подкинуть карту](<./images/Interaction Diagrams/Подкинуть карту.png>)

| Метод       | ThrowCard(card)                                                                                  |
|----------------|-------------------------------------------------------------------------------------------------------------|
| Ссылки         | Прецедент "Подкинуть карту"                                                                                 |
| Описание       | Игрок подкидывает карту                               |
|Параметры| card - карта игрока, которую он подкидывает|
| Предусловие    | Игрок присутствует в комнате для игры, игра запущена, ход предоставлен игроку, выброшена хотя бы одна карта |
| Постусловие    | Подкинутая карта отображется на столе                                                                       |

---

| Метод       | CheckCardsCount(player)                                                                   |
|----------------|-------------------------------------------------------------------------------------------------------------|
| Ссылки         | Прецедент "Подкинуть карту"                                                                                 |
| Описание       | Система проверяет количество карт у игрока                               |
|Параметры| player - игрок (на диаграмме в метод передается attacker - атакующий и defender - защищающийся)|
| Предусловие    | Игрок подкинул карту                                                                                        |
| Постусловие    | Система получает количество карт у игрока                                                            |

---

| Метод       | CheckDeckCardsCount()                                                                         |
|----------------|-------------------------------------------------------------------------------------------------------------|
| Ссылки         | Прецедент "Подкинуть карту"                                                                                 |
| Описание       | Система проверяет количество карт в колоде                              |
| Предусловие    | Игрок подкинул карту                                                                                        |
| Постусловие    | Система получает количество карт в колоде                                                                   |

---

| Метод       | FinishGame()                                                                  |
|----------------|-------------------------------------------------------------------------------------------------------------|
| Ссылки         | Прецедент "Подкинуть карту"                                                                                 |
| Описание       | Система завершает игру                             |
| Предусловие    | У одного из игроков не осталось карт и в колоде нет карт                         |
| Постусловие    | Игра завершена                                          |

--- 

| Метод       | SetWinner(player)                                                                   |
|----------------|-------------------------------------------------------------------------------------------------------------|
| Ссылки         | Прецедент "Подкинуть карту"                                                                                 |
| Описание       | Система назначает победителя                               |
|Параметры| player - игрок (на диаграмме в метод передается attacker - атакующий и defender - защищающийся)|
| Предусловие    | Игра завершена                                                                                        |
| Постусловие    | Отображено имя победителя 

---

| Метод       | ValidateThrowMove(card)                                                                                 |
|----------------|-------------------------------------------------------------------------------------------------------------|
| Ссылки         | Прецедент "Подкинуть карту"                                                                                 |
| Описание       | Система проверяет корректность хода (подкидывание карты)                               |
|Параметры| card - карта игрока, которую он подкидывает|
| Предусловие    | Игрок подкинул карту                                                                                        |
| Постусловие    | Система получила информацию о корректности хода                                                             |


### Прецедент "Взять карты"
![Взять карты](<./images/Interaction Diagrams/Взять карты.png>)

| Метод       | TakeCards()                                                                                      |
|----------------|---------------------------------------------------------------------------------------------------------------------|
| Ссылки         | Прецедент "Взять карты"                                                                                             |
| Описание       | Игрок берёт карты                              |
| Предусловие    | Игрок присутствует в комнате для игры, игра запущена, ход предоставлен другому игроку, выброшена хотя бы одна карта |
| Постусловие    | Игрок забрал карты, ход передан следующему игроку                                                                   |

---

| Метод       | AddCards(moveCards)                                                                                     |
|----------------|---------------------------------------------------------------------------------------------------------------------|
| Ссылки         | Прецедент "Взять карты"                                                                                             |
| Описание       | Система добавляет игроку карты, которы были выброшены во время хода                              |
| Предусловие    | Игрок взял карты                                                                                                    |
| Постусловие    | Карты отображены на на руках игрока                                                                                 |

---

| Метод       | FinishMove()                                                                                                       |
|----------------|---------------------------------------------------------------------------------------------------------------------|
| Ссылки         | Прецедент "Взять карты"                                                                                             |
| Описание       | Система завершает ход и передает его другому игроку                             |
| Предусловие    | Игрок взял карты                                                                                                    |
| Постусловие    | Ход игрока завершен                                                                                                 |


### Прецедент "Завершить ход"
![Завершить ход](<./images/Interaction Diagrams/Завершить ход.png>)

| Метод       | CheckDeckCardsCount()                                                                         |
|----------------|-------------------------------------------------------------------------------------------------------------|
| Ссылки         | Прецедент "Завершить ход"                                                                                   |
| Описание       | Система проверяет количество карт в колоде                              |
| Предусловие    | Игрок завершил ход                                                                                        |
| Постусловие    | Система получает количество карт в колоде                                                                   |

---

| Метод       | CheckCardsCount(player)                                                                   |
|----------------|-------------------------------------------------------------------------------------------------------------|
| Ссылки         | Прецедент "Завершить ход"                                                                                 |
| Описание       | Система проверяет количество карт у игрока                               |
|Параметры| player - игрок (на диаграмме в метод передается attacker - атакующий и defender - защищающийся)|
| Предусловие    | Игрок завершил ход                                                                                       |
| Постусловие    | Система получает количество карт у игрока                                                            |

---

| Метод       | AddRandomCards(cardsCount)                                                                                 |
|----------------|---------------------------------------------------------------------------------------------------------------------|
| Ссылки         |  Прецедент "Завершить ход"                                                                                             |
| Описание       | Система выдает игроку случайны карты                             |
| Параметры | cardsCount - количество карт, которые необходимо выдать игроку |
| Предусловие    | Игрок взял карты                                                                                                    |
| Постусловие    | Ход игрока завершен                                                                                                 |

---
| Метод       | FinishMove()                                                                                                       |
|----------------|---------------------------------------------------------------------------------------------------------------------|
| Ссылки         |  Прецедент "Завершить ход"                                                                                             |
| Описание       | Система завершает ход и передает его другому игроку                             |
| Предусловие    | Игрок взял карты                                                                                                    |
| Постусловие    | Ход игрока завершен                                                                                                 |

### Прецедент "Отбить карту"
![Отбить карту](<./images/Interaction Diagrams/Отбить карту.png>)

| Операция       | DefendFromCard(card)                                                                                              |
|----------------|-------------------------------------------------------------------------------------------------------------|
| Ссылки         | Прецедент "Отбить карту"                                                                                    |
|Описание| Игрок отбивает карту |
|Параметры| card - карта, которой игрок хочет отбить другую карту |
| Предусловие    | Игрок присутствует в комнате для игры, игра запущена, ход предоставлен другому игроку                       |
| Постусловие    | Карта отображена поверх отбиваемой                                                                          |

---

| Операция       | ValidateDefendMove()                                                                             |
|----------------|-------------------------------------------------------------------------------------------------------------|
| Ссылки         | Прецедент "Отбить карту"                                                                                    |
|Описание| Система проверяет коректность хода игрока (отбивание карты) |
| Предусловие    | Игрок отбил карту                                                                                           |
| Постусловие    | Система получила информацию о корректности хода                                                             |

---

| Операция       | CheckCardsCount(defender)                                                                   |
|----------------|-------------------------------------------------------------------------------------------------------------|
| Ссылки         | Прецедент "Отбить карту"                                                                                    |
|Описание| Система проверяет количество карт у защищающегося игрока |
|Параметры| defender - игрок (защищающийся) |
| Предусловие    | Игрок отбил карту                                                                                           |
| Постусловие    | Система получила информацию о количества карт у отбивающегося                                               |

---

| Метод       | CheckDeckCardsCount()                                                                         |
|----------------|-------------------------------------------------------------------------------------------------------------|
| Ссылки         | Прецедент "Отбить карту"                                                                                    |
| Описание       | Система проверяет количество карт в колоде                              |
| Предусловие    | Игрок отбил карту                                                                                        |
| Постусловие    | Система получает количество карт в колоде                                                                   |

---

| Метод       | FinishMove()                                                                                                       |
|----------------|---------------------------------------------------------------------------------------------------------------------|
| Ссылки         |   Прецедент "Отбить карту"                                                                                            |
| Описание       | Система завершает ход и передает его другому игроку                             |
| Предусловие    | Игрок отбил карту                                                                                                    |
| Постусловие    | Система завершила ход                                                                                                   

---
| Метод       | SetWinner(defender)                                                                   |
|----------------|-------------------------------------------------------------------------------------------------------------|
| Ссылки         | Прецедент "Отбить карту"                                                                                  |
| Описание       | Система назначает победителя                               |
|Параметры| defender - игрок (защищающийся) |
| Предусловие    | У отбивающегося не осталось карт и в колоде нет карт                                     |
| Постусловие    | Отображено имя победителя

---

| Метод       | FinishGame()                                                                  |
|----------------|-------------------------------------------------------------------------------------------------------------|
| Ссылки         | Прецедент "Отбить карту"                                                                                 |
| Описание       | Система завершает игру                             |
| Предусловие    | У отбивающегося не осталось карт и в колоде нет карт                           |
| Постусловие    | Игра завершена                                          |


